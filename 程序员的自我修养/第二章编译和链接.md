# 一:C语言程序转换成可执行的机器码中间做了什么？
    分为四个阶段:预处理，编译，汇编，链接。
## 1.1 预处理
    1.删除所有#define 并且展开宏定义
    2.处理所有条件预编译指令 “ifdef” "endif" "if" "else" "elif"
    3.处理“#include 预编译指令，将被包含的文件插入到该预编译指令的位置，这个过程递归进行
    4.删除所有注释
    5.保留所有的#pragma 编译器指令 编译器需要使用他们
    6.为文件添加行号和文件名标识 以便于编译时编译器产生调试用的行号信息以及出现错误或者警告时显示行号
## 1.2 编译
    编译阶段就是把预处理阶段生成的.i文件，经过词法分析 语法分析 语义分析 源代码优化 目标代码生成和优化。
### 1.2.1 词法分析
    .i文件经过扫描器进行词法分析，运用一种有效状态机的算法将字符分割成一系列的记号。同时将标识符存放到符号表，将数字，字符串常量存放到文字表
### 1.2.2 语法分析
    语法分析,对扫描器产生的信号进行语法分析，从而产生语法树。由语法分析器生成的语法树就是以表达式为节点的数。
    如果出现表达式不合法，编译器会报语法分析阶段的错误。
### 1.2.3 语义分析
    编译器分析静态语义，类型的匹配，类型的转换。动态语义指运行期的错误，比如将0作为除数。
### 1.2.4 源代码优化
    优化产生机器无关的代码
### 1.2.5 目标代码生成与优化
    将中间代码生成目标机器代码并进行优化，如果变量定义在其他模块则在链接时确定最后地址
## 1.3 汇编
    将.s文件中的汇编代码翻译成机器指令.o文件
## 1.4 静态链接
    链接的规则：相同的段进行合并
    将多个目标文件中的相同段进行合并，为新的段分配虚拟内存地址，记录新的段在新文件中的偏移量，即VMA和File off。同时，计算并记录所有的符号的虚拟内存地址
    根据各个目标文件中的重定位段信息，对合并后的text段中涉及到符号引用的位置进行重定位。
    
***windows***
    静态库为:lib
    动态库为：dll
***Linux***
    静态库为:.a (很多.o合在一起)
    动态库为：.so



    